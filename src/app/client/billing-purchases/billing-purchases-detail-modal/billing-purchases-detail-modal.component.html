<ng-template #billingPurchasesDetailModal let-modal>
  <div class="modal-header editRowModal">
    <h4 class="modal-title" id="modal-basic-title">
      <div class="table-modal-header">
        <div class="modal-about">
          <div class="fw-bold p-t-10 font-17">
            Factura de servicios No. {{invoice.id}}
          </div>
        </div>
      </div>
    </h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true"><i class="material-icons">close</i></span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <h6>Datos del comprador</h6>
        <div class="mt-3">
          <span class="float-start">
            Afiliado:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{user.user_name}}
          </span>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Metodo de pago:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{invoice.paymentMethod}}
          </span>
        </div>
      </div>

    </div>
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">

        <div class="mt-3">
          <span class="float-start">
            Nombre y Apellido:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">{{user.name + ' ' + user.last_name}}
          </span>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Banco:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{invoice.bank}}
          </span>
        </div>
      </div>

    </div>
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            No. de Identificación Fiscal:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{user.user_name}}
          </span>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Comprobante:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">

          </span>
        </div>
      </div>

    </div>
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">Correo:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{user.email}}
          </span>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Fecha deposito:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{invoice.depositDate}}
          </span>
        </div>
      </div>

    </div>
    <div class="row">

      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Teléfono:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{user.phone}}
          </span>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Fecha emisión:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{invoice.date}}
          </span>
        </div>
      </div>


    </div>
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            País:</span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{getCountryName(user.country)}}
          </span>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Fecha anulación:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{invoice.cancellationDate}}
          </span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Estado:
          </span>
        </div>

      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Factura pagada:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            <div *ngIf="invoice.state == true" class="badge-outline col-green">
              Pagada
            </div>
            <div *ngIf="invoice.state == false" class="badge-outline col-red">
              No pagada
            </div>
          </span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Ciudad:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{user.city}}
          </span>
        </div>
      </div>

      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Factura activa:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            <div *ngIf="invoice.status == true" class="badge-outline col-green">
              Activa
            </div>
            <div *ngIf="invoice.status == false" class="badge-outline col-red">
              Cancelada
            </div>
          </span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Domicilio:
          </span>
        </div>
        <div class="mt-3">
          <span class="float-end text-muted">
            {{user.address}}
          </span>
        </div>
      </div>
      <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 mb-2">
        <div class="mt-3">
          <span class="float-start">
            Tipo de compra:
          </span>
        </div>

      </div>
    </div>

    <h6 class="mt-5">Detalles de Items</h6>
    <hr>

    <div class="row">
      <div class="col-xl-5 col-sm-6"><label>Concepto</label></div>
      <div class="col-xl-1 col-sm-6"><label>Cantidad</label></div>
      <div class="col-xl-1 col-sm-6"><label>Precio unitario</label></div>
      <div class="col-xl-1 col-sm-6"><label>Descuento</label></div>
      <div class="col-xl-1 col-sm-6"><label>COM</label></div>
      <div class="col-xl-1 col-sm-6"><label>PNTB</label></div>
      <div class="col-xl-1 col-sm-6"><label>PNT</label></div>
      <div class="col-xl-1 col-sm-6"><label>Total</label></div>
    </div>

    <div class="row" *ngFor="let item of invoice.invoicesDetails">
      <div class="col-xl-5 col-sm-6">{{item.productName}}</div>
      <div class="col-xl-1 col-sm-6">{{item.productQuantity}}</div>
      <div class="col-xl-1 col-sm-6">{{item.productPrice}}</div>
      <div class="col-xl-1 col-sm-6">{{item.productDiscount}}</div>
      <div class="col-xl-1 col-sm-6">{{item.productCommissionable}}</div>
      <div class="col-xl-1 col-sm-6">{{item.binaryPoints}}</div>
      <div class="col-xl-1 col-sm-6">{{item.productPoints}}</div>
      <div class="col-xl-1 col-sm-6">{{ Math.round((item.productPrice * item.productQuantity) * (1 + item.productIva /
        100)) }}</div>
    </div>

    <div class="row mt-4">
      <div class="col-xl-12 col-sm-12 text-end"><label>Sub Total: USD {{subTotal}}</label></div>
    </div>
    <div class="row">
      <div class="col-xl-12 col-sm-12 text-end"><label>Impuesto incluído: USD {{totalTax}}</label></div>
    </div>
    <div class="row">
      <div class="col-xl-12 col-sm-12 text-end"><label>Total descuento: USD
          {{totalDiscount}}</label></div>
    </div>
    <div class="row">
      <div class="col-xl-12 col-sm-12 text-end"><label>Total a pagar: USD {{ invoice.totalInvoice}} </label></div>
    </div>
  </div>
</ng-template>
